# Features

- **List Sources (`--list-sources`)**: Outputs the list of configured public data sources in JSON format. If a `data-sources.json` file is present with a valid array of `{ name, url }`, it will be merged with the default sources. Invalid or missing configs will fall back to defaults with a warning for invalid configs.
- **Help (`--help`, `-h`)**: Display the help message with usage instructions.
- **Diagnostics (`--diagnostics`)**: Outputs diagnostic information (version, node version, platform, architecture, working directory, uptimeSeconds, memoryUsage, and commands) as pretty-printed JSON, including:
  - **publicDataSources**: Array of configured data sources (merged default and custom from data-sources.json).
  - **healthChecks**: Array of objects with real-time availability and latency metrics for each configured data source.
  - **dataFilesCount**: Number of JSON files in the project `data/` directory (or `0` if directory is missing).
  - **dataFiles**: Sorted list of JSON filenames present in `data/` (or an empty array if none).
  - **intermediateFilesCount**: Number of JSON files in the project `intermediate/` directory (or `0` if directory is missing).
  - **intermediateFiles**: Sorted list of JSON filenames present in `intermediate/` (or an empty array if none).
  - **dependencies**: Object mapping runtime dependency names to their installed versions from `package.json`.
  - **devDependencies**: Object mapping development dependency names to their installed versions from `package.json`.
- **Build Intermediate (`--build-intermediate`)**: Reads JSON files from `data/`, transforms each into OWL JSON-LD intermediate artifacts in `intermediate/`, logs each write, and prints a summary line.
- **Add Source (`--add-source <name> <url>`)**: Add a custom data source to the `data-sources.json` configuration, validating inputs and preventing duplicates. Outputs the merged list of sources in JSON.
- **Remove Source (`--remove-source <identifier>`)**: Remove a custom data source by its name or URL from `data-sources.json`. Outputs the updated merged list of sources in JSON.
- **Update Source (`--update-source <identifier> <newName> <newUrl>`)**: Update the name or URL of an existing custom data source in `data-sources.json`, validating inputs and writing the updated configuration. Outputs the merged list of sources in JSON.
- **Build Enhanced (`--build-enhanced`, alias `-be` [dataDir] [intermediateDir] [outDir])**: Runs the full ontology-building pipeline: refresh sources, build intermediate artifacts, and merge into a single enhanced OWL JSON-LD document. Optionally specify custom input (data), intermediate, and output directories (default: data → intermediate → enhanced). Logs each step and outputs a summary line: `Enhanced ontology written to <outDir>/enhanced.json with <count> nodes`.
- **Capital Cities (`--capital-cities`)**: Queries DBpedia for country-capital pairs and outputs an OWL-compatible JSON-LD document with `@context` and `@graph`.
- **SPARQL Query (`--query`, `-q`)**: Execute SPARQL SELECT or ASK queries on JSON-LD OWL artifacts and output results in SPARQL JSON format. Also available via HTTP GET `/query?file=<path>&sparql=<query>`.
- **HTTP Endpoint for Sources Management:**
  - **GET /sources**: Responds with HTTP 200 and a JSON array of merged default and custom data sources.
  - **POST /sources**: Reads and buffers the request body as JSON with fields `{ name: string, url: string }`. Adds a custom data source via `addSource`, responds with HTTP 201 and the merged list as JSON, or HTTP 400 with a plain-text error on invalid input.
  - **DELETE /sources/:identifier**: Removes a custom data source by name or URL via `removeSource`, responds with HTTP 200 and the merged list as JSON.
  - **PUT /sources/:identifier**: Reads and buffers the request body as JSON with fields `{ name: string, url: string }`. Updates an existing custom data source via `updateSource`, responds with HTTP 200 and the merged list as JSON, or HTTP 400 with a plain-text error on invalid input.
