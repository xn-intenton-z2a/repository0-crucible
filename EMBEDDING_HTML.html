<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="embedding_html" href="#embedding_html"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EMBEDDING_HTML</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">Use <script type="application/ld+json"> containing valid RFC8259 JSON. Relative IRIs in embedded JSON-LD must be resolved against the HTML <base> href or document URL. Script content must not include comments or HTML escapes. Locate scripts via CSS selectors or id for processing and merging.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents:
1 Inheriting Base IRI from HTML's base element
2 Restrictions for JSON-LD script contents
3 Locating JSON-LD script elements</p>
<p class="md-github">1 Inheriting Base IRI from HTML's base element</p>
<ul class="md-github">
<li class="md-github">Use <base href> or document URL to resolve relative IRIs in script content</li>
<li class="md-github">Example: <base href="https://example.com/resources/"> and &quot;@id&quot;:&quot;item1&quot; resolves to &quot;https://example.com/resources/item1&quot;</li>
</ul>
<p class="md-github">2 Restrictions for JSON-LD script contents</p>
<ul class="md-github">
<li class="md-github">script element attribute: type=&quot;application/ld+json&quot;</li>
<li class="md-github">content must be valid JSON per RFC8259: object or array literal</li>
<li class="md-github">no HTML comments or escape sequences</li>
<li class="md-github">strip BOM before parsing</li>
<li class="md-github">ignore leading/trailing whitespace</li>
</ul>
<p class="md-github">3 Locating JSON-LD script elements</p>
<ul class="md-github">
<li class="md-github">querySelector('script[type=&quot;application/ld+json&quot;]') returns first script</li>
<li class="md-github">getElementById('id') for named scripts</li>
<li class="md-github">ignore all other script types</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">Implementation Steps:</p>
<ol class="md-github">
<li class="md-github">In HTML <head>, include <base href="..."> to set base IRI.</li>
<li class="md-github">Add <script type="application/ld+json" id="..."> containing JSON-LD document.</li>
<li class="md-github">Ensure JSON is purified: no comments, valid Unicode, proper double quotes.</li>
<li class="md-github">In JavaScript, use document.querySelector or getElementById to retrieve script content.</li>
<li class="md-github">Strip BOM and whitespace: textContent.replace(/^\uFEFF/, '').trim().</li>
<li class="md-github">Pass JSON string to JSON.parse for processing with JSON-LD API.</li>
</ol>
<p class="md-github">Configuration Options:</p>
<ul class="md-github">
<li class="md-github"><code class="md-github">scriptSelector</code> default: 'script[type=&quot;application/ld+json&quot;]'</li>
<li class="md-github"><code class="md-github">stripBOM</code> boolean default: true</li>
<li class="md-github"><code class="md-github">mergeMultipleScripts</code> boolean default: true</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">Code Example:</p>
<pre class="md-github"><code class="md-github language-html">&lt;head&gt;
  &lt;base href=&quot;https://api.example.com/&quot;&gt;
  &lt;script type=&quot;application/ld+json&quot; id=&quot;product-jsonld&quot;&gt;
  {
    &quot;@context&quot;: {
      &quot;@vocab&quot;: &quot;https://schema.org/&quot;,
      &quot;price&quot;: {&quot;@id&quot;: &quot;price&quot;, &quot;@type&quot;: &quot;xsd:decimal&quot;}
    },
    &quot;@id&quot;: &quot;product123&quot;,
    &quot;name&quot;: &quot;Widget&quot;,
    &quot;price&quot;: &quot;19.99&quot;
  }
  &lt;/script&gt;
&lt;/head&gt;
</code></pre>
<p class="md-github">JavaScript Implementation Pattern:</p>
<pre class="md-github"><code class="md-github language-javascript">function loadJsonLd(options) {
  const selector = options.scriptSelector || 'script[type=&quot;application/ld+json&quot;]';
  const scripts = document.querySelectorAll(selector);
  const jsonObjects = [];
  scripts.forEach(script =&gt; {
    let text = script.textContent;
    if(options.stripBOM) text = text.replace(/^\uFEFF/, '');
    text = text.trim();
    try {
      const obj = JSON.parse(text);
      jsonObjects.push(obj);
    } catch(e) {
      console.error('Invalid JSON-LD:', e);
    }
  });
  return options.mergeMultipleScripts ? mergeJsonLd(jsonObjects) : jsonObjects[0];
}

function mergeJsonLd(docs) {
  // merge @context arrays and @graph arrays according to JSON-LD 1.1 merge rules
  const merged = { '@context': [], '@graph': [] };
  docs.forEach(doc =&gt; {
    if(doc['@context']) merged['@context'].push(doc['@context']);
    if(Array.isArray(doc['@graph'])) merged['@graph'] = merged['@graph'].concat(doc['@graph']);
    else merged['@graph'].push(doc);
  });
  return merged;
}
</code></pre>
<p class="md-github">Best Practices:</p>
<ul class="md-github">
<li class="md-github">Place <script> tags in <head> for early indexing.</li>
<li class="md-github">Use unique id attributes for targeted retrieval.</li>
<li class="md-github">Validate JSON-LD with <code class="md-github">jsonld.validate()</code> before publishing.</li>
</ul>
<p class="md-github">Troubleshooting:
Command: <code class="md-github">console.log(loadJsonLd({}))</code>
Expected Output: merged JSON-LD object or single document
Errors:</p>
<ul class="md-github">
<li class="md-github">&quot;Invalid JSON-LD&quot; if parsing fails</li>
<li class="md-github">Missing script: returns undefined or empty array</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="information-dense-extract" href="#information-dense-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information Dense Extract</h2>
<script type=application/ld+json> must contain pure JSON per RFC8259. Use HTML <base href> or document URL as base IRI. Strip BOM and trim whitespace before JSON.parse. Locate scripts via document.querySelector or getElementById. Default selector: script[type="application/ld+json"]. Options: stripBOM=true, mergeMultipleScripts=true. Implementation: loadJsonLd reads scripts, parses JSON, merges contexts and graphs. Merge: context arrays concatenation, graph arrays flattened. Best practices: scripts in head, unique ids, validate with jsonld.validate(). Troubleshoot parse errors via console.error.

## Sanitised Extract
Table of Contents:
1 Inheriting Base IRI from HTML's base element
2 Restrictions for JSON-LD script contents
3 Locating JSON-LD script elements

1 Inheriting Base IRI from HTML's base element
   - Use <base href> or document URL to resolve relative IRIs in script content
   - Example: <base href='https://example.com/resources/'> and '@id':'item1' resolves to 'https://example.com/resources/item1'

2 Restrictions for JSON-LD script contents
   - script element attribute: type='application/ld+json'
   - content must be valid JSON per RFC8259: object or array literal
   - no HTML comments or escape sequences
   - strip BOM before parsing
   - ignore leading/trailing whitespace

3 Locating JSON-LD script elements
   - querySelector('script[type='application/ld+json']') returns first script
   - getElementById('id') for named scripts
   - ignore all other script types

## Original Source
JSON-LD 1.1 Specification
https://www.w3.org/TR/json-ld11/

## Digest of EMBEDDING_HTML

# Embedding JSON-LD in HTML Documents

This section provides the exact markup, processing rules, and constraints for embedding JSON-LD within HTML documents.

## 7.1 Inheriting Base IRI from HTML's base element

HTML documents may include a `<base>` element to establish a base IRI. JSON-LD processors MUST use the HTML document’s base IRI when resolving relative IRI references in embedded JSON-LD script elements. If no `<base>` element is present, the document’s location serves as the base IRI.

Example HTML:

```html
<html>
  <head>
    <base href="https://example.com/resources/">
    <script type="application/ld+json">
    {
      "@context": {"ex": "vocab#"},
      "@id": "item1"
    }
    </script>
  </head>
</html>
```
<p class="md-github">In this example, the JSON-LD <code class="md-github">@id</code> of <code class="md-github">item1</code> expands to <code class="md-github">https://example.com/resources/item1</code>.</p>
<h2 class="md-github"><a class="md-github__anchor" name="72-restrictions-for-contents-of-json-ld-script-elements" href="#72-restrictions-for-contents-of-json-ld-script-elements"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7.2 Restrictions for contents of JSON-LD script elements</h2>
<ol class="md-github">
<li class="md-github">The <code class="md-github">&lt;script&gt;</code> element MUST have <code class="md-github">type=&quot;application/ld+json&quot;</code>.</li>
<li class="md-github">The content MUST be valid JSON conforming to RFC8259. No HTML escape sequences or comments are allowed.</li>
<li class="md-github">Leading or trailing white space is permitted but processors MUST ignore it.</li>
<li class="md-github">The script content MUST not include non-JSON-LD tokens. Only JSON objects and arrays are valid.</li>
<li class="md-github">Unicode BOM characters, if present, MUST be stripped before JSON parsing.</li>
</ol>
<p class="md-github">Violation of any restrictions MUST cause a processor to treat the script as non-JSON-LD content.</p>
<h2 class="md-github"><a class="md-github__anchor" name="73-locating-a-specific-json-ld-script-element" href="#73-locating-a-specific-json-ld-script-element"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7.3 Locating a Specific JSON-LD Script Element</h2>
<p class="md-github">JSON-LD processors or custom scripts can locate embedded JSON-LD by querying for script elements:</p>
<pre class="md-github"><code class="md-github language-javascript">// Locate the first JSON-LD script in the document
const jsonLdScript = document.querySelector('script[type=&quot;application/ld+json&quot;]');

// Locate a JSON-LD script with a specific id attribute
const jsonLdScriptById = document.getElementById('my-jsonld');
</code></pre>
<p class="md-github">Scripts without <code class="md-github">type=&quot;application/ld+json&quot;</code> must be ignored. If multiple JSON-LD scripts exist, processors MAY merge contexts and graph data according to JSON-LD merge rules.</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: JSON-LD 1.1 Specification</li>
<li class="md-github">URL: https://www.w3.org/TR/json-ld11/</li>
<li class="md-github">License: CC0 1.0 Universal</li>
<li class="md-github">Crawl Date: 2025-04-26T16:50:13.851Z</li>
<li class="md-github">Data Size: 19913827 bytes</li>
<li class="md-github">Links Found: 140382</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-04-26</p>

  </section>
  <footer>
    <p>Generated on 2025-04-26T17:20:11.116Z</p>
  </footer>
</body>
</html>