<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="node_esm" href="#node_esm"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>NODE_ESM</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">ESM in Node.js supports two module systems. Key technical points include explicit markers (.mjs, package.json &quot;type&quot; field, --input-type flag) to define module type, resolution via URL semantics, and specialized handling of import specifiers (relative, bare, absolute). Detailed algorithms ESM_RESOLVE and ESM_FILE_FORMAT define resolution behavior, including support for JSON, WASM, and dynamic import(). The technical content covers built-in modules and interoperability with CommonJS, with strict rules for file extensions, URL encoding, and package exports/imports resolution.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">Introduction
<ul class="md-github">
<li class="md-github">Definition of ECMAScript modules</li>
<li class="md-github">Code example: Exporting and importing functions</li>
</ul>
</li>
<li class="md-github">Enabling
<ul class="md-github">
<li class="md-github">Flags and file extensions to enable ES modules and CommonJS</li>
<li class="md-github">Example configuration in package.json and CLI arguments</li>
</ul>
</li>
<li class="md-github">Packages
<ul class="md-github">
<li class="md-github">Explanation of bare, relative, and absolute specifiers</li>
<li class="md-github">Package resolution via package.json exports</li>
</ul>
</li>
<li class="md-github">Import Specifiers and Attributes
<ul class="md-github">
<li class="md-github">Detailed types: relative, bare, absolute</li>
<li class="md-github">Syntax for import with attributes and required type for JSON</li>
</ul>
</li>
<li class="md-github">Built-in Modules and Dynamic Imports
<ul class="md-github">
<li class="md-github">Built-in module usage with default and named exports</li>
<li class="md-github">Dynamic import() and its support in both module systems</li>
</ul>
</li>
<li class="md-github">import.meta and its Properties
<ul class="md-github">
<li class="md-github">import.meta.dirname, filename, url, and resolve(specifier) method with version notes and behavior</li>
</ul>
</li>
<li class="md-github">Interoperability with CommonJS
<ul class="md-github">
<li class="md-github">Mechanism for wrapping CommonJS modules as ES modules</li>
<li class="md-github">Details on lack of __filename and __dirname, and use of module.createRequire</li>
</ul>
</li>
<li class="md-github">JSON and Wasm Modules
<ul class="md-github">
<li class="md-github">Mandatory syntax for JSON import</li>
<li class="md-github">Experimental status and flag requirements for Wasm modules</li>
</ul>
</li>
<li class="md-github">Top-Level Await
<ul class="md-github">
<li class="md-github">Allowing await at module top-level with failure behavior</li>
</ul>
</li>
<li class="md-github">Loaders and Customization Hooks
<ul class="md-github">
<li class="md-github">Customizing resolution with module hooks</li>
</ul>
</li>
<li class="md-github">Resolution and Loading Algorithm
<ul class="md-github">
<li class="md-github">ESM_RESOLVE: Step-by-step algorithm for resolving module specifiers including error conditions</li>
<li class="md-github">ESM_FILE_FORMAT: Determining module format based on file extension and package type
Detailed Details:</li>
</ul>
</li>
</ol>
<ul class="md-github">
<li class="md-github">Use .mjs extension or package.json &quot;type&quot;: &quot;module&quot; to trigger ESM.</li>
<li class="md-github">When resolving, if specifier is URL, use directly; if relative, use parent's URL; if bare, use PACKAGE_RESOLVE.</li>
<li class="md-github">JSON modules require with { type: 'json' }.</li>
<li class="md-github">import.meta.resolve returns a string URL synchronously and accepts an optional parent URL parameter when experimental flag is set.</li>
<li class="md-github">ESM_RESOLVE algorithm checks for valid URL, relative specifiers, bare specifiers; computes format via ESM_FILE_FORMAT which checks extensions (.mjs -&gt; module, .cjs -&gt; commonjs, .json -&gt; json, etc.)</li>
<li class="md-github">Error handling includes Invalid Module Specifier, Module Not Found, and Unsupported Directory Import.</li>
<li class="md-github">Customization hooks override resolution; ensure synchronous operation to avoid deadlock.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">Exact Parameter Values and Configuration Options:</p>
<ul class="md-github">
<li class="md-github">File Extensions: '.mjs', '.cjs', '.json', '.wasm', '.node'</li>
<li class="md-github">package.json &quot;type&quot;: Accepts 'module' or 'commonjs'</li>
<li class="md-github">CLI Flags: --input-type=module or --input-type=commonjs, --experimental-wasm-modules, --experimental-import-meta-resolve</li>
</ul>
<p class="md-github">Detailed Implementation Steps for Resolution:</p>
<ol class="md-github">
<li class="md-github">ESM_RESOLVE(specifier, parentURL):
<ul class="md-github">
<li class="md-github">If specifier is a valid URL, parse and return.</li>
<li class="md-github">Else if specifier starts with '/', './', or '../', resolve relative to parentURL.</li>
<li class="md-github">Else if specifier starts with '#', use PACKAGE_IMPORTS_RESOLVE.</li>
<li class="md-github">Otherwise, treat as bare specifier and use PACKAGE_RESOLVE.</li>
</ul>
</li>
<li class="md-github">ESM_FILE_FORMAT(url):
<ul class="md-github">
<li class="md-github">Check file extension:
<ul class="md-github">
<li class="md-github">.mjs returns 'module'</li>
<li class="md-github">.cjs returns 'commonjs'</li>
<li class="md-github">.json returns 'json'</li>
<li class="md-github">.wasm returns 'wasm' (if flag enabled)</li>
<li class="md-github">.node returns 'addon' (if flag enabled)</li>
</ul>
</li>
<li class="md-github">For .js without extension, detect package type via package.json and source analysis</li>
</ul>
</li>
<li class="md-github">PACKAGE_RESOLVE and its subroutines perform file system lookups using parent directory traversal until a package.json is found.</li>
<li class="md-github">Troubleshooting Tips:
<ul class="md-github">
<li class="md-github">If module not found, ensure correct file extension and valid package.json exports.</li>
<li class="md-github">For resolution errors (Invalid Module Specifier), verify that specifiers are correctly formatted and percent-encoded where needed.</li>
</ul>
</li>
</ol>
<p class="md-github">Configuration Effects:</p>
<ul class="md-github">
<li class="md-github">Enabling flags alter behavior of WASM and addon resolution.</li>
<li class="md-github">package.json &quot;exports&quot; field restricts accessible module paths.</li>
</ul>
<p class="md-github">Implementation Example for import.meta.resolve:
const depURL = import.meta.resolve('./dep.js');
// Expected output: absolute URL string for './dep.js'</p>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">API Specifications and SDK Signatures:</p>
<p class="md-github">-- import.meta.resolve(specifier: string, parent?: string|URL): string
Returns an absolute URL by resolving specifier against import.meta.url or provided parent URL.
Examples:
const url1 = import.meta.resolve('component-lib/asset.css');
// returns: file:///app/node_modules/component-lib/asset.css
const url2 = import.meta.resolve('./dep.js');
// returns: file:///app/dep.js</p>
<p class="md-github">-- ESM_RESOLVE(specifier: string, parentURL: string): { format: string, resolved: string }
Steps:
1. If specifier is a valid URL, set resolved = URL(specifier).
2. Else if specifier starts with '/', './', '../', compute URL resolution with parentURL.
3. Else if specifier starts with '#', call PACKAGE_IMPORTS_RESOLVE.
4. Else, treat as bare specifier and call PACKAGE_RESOLVE, traversing up directories.
Errors:
- Invalid Module Specifier
- Module Not Found
- Unsupported Directory Import</p>
<p class="md-github">-- ESM_FILE_FORMAT(url: string): string
Returns one of: 'module', 'commonjs', 'json', 'wasm', 'addon'.
Logic:
- Ends with '.mjs' -&gt; 'module'
- Ends with '.cjs' -&gt; 'commonjs'
- Ends with '.json' -&gt; 'json'
- For '.js': analyze package.json type and source module syntax</p>
<p class="md-github">-- PACKAGE_RESOLVE(packageSpecifier: string, parentURL: string): string
Implements resolution for bare specifiers using:
- Lookup of node_modules
- Reading package.json (READ_PACKAGE_JSON)
- Processing exports field (PACKAGE_EXPORTS_RESOLVE)</p>
<p class="md-github">Code Example in ESM:
// addTwo.mjs
function addTwo(num) {
return num + 2;
}
export { addTwo };</p>
<p class="md-github">// app.mjs
import { addTwo } from './addTwo.mjs';
console.log(addTwo(4));</p>
<p class="md-github">Configuration Options:</p>
<ul class="md-github">
<li class="md-github">--input-type: 'module' or 'commonjs'</li>
<li class="md-github">package.json &quot;type&quot;: 'module' or 'commonjs'</li>
<li class="md-github">Experimental flags: --experimental-wasm-modules, --experimental-import-meta-resolve</li>
</ul>
<p class="md-github">Troubleshooting Procedures:</p>
<ol class="md-github">
<li class="md-github">For resolution errors, run node with increased verbosity to see resolution paths.</li>
<li class="md-github">Check file extensions and ensure proper URL encoding.</li>
<li class="md-github">For JSON modules, ensure import syntax includes with { type: 'json' }.</li>
<li class="md-github">Use module.createRequire() when needing CommonJS require in ESM.</li>
</ol>
<p class="md-github">Best Practices:</p>
<ul class="md-github">
<li class="md-github">Always specify file extensions in import statements.</li>
<li class="md-github">Use import.meta for module-specific details instead of __dirname or __filename.</li>
<li class="md-github">Validate package.json exports to avoid module not found errors.</li>
<li class="md-github">Use dynamic import() for asynchronous module loading in both ESM and CommonJS.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="information-dense-extract" href="#information-dense-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information Dense Extract</h2>
<p class="md-github">ESM support via .mjs/package.json type/module; CLI flag --input-type; specifiers: relative (required extension), bare (node_modules lookup, package.json exports), absolute (file:// URL); import.meta properties: dirname, filename, url, resolve(specifier) returning absolute URL synchronously; ESM_RESOLVE algorithm: valid URL check, relative resolution, PACKAGE_RESOLVE for bare specifiers; ESM_FILE_FORMAT: .mjs-&gt;module, .cjs-&gt;commonjs, .json-&gt;json, .wasm-&gt;wasm (if experimental), else detect via package.json; CommonJS interop: default export wrapping module.exports, no __filename/__dirname; JSON modules require with { type: 'json' }; top-level await supported; dynamic import() available; customization hooks for resolution; errors: Invalid Module Specifier, Module Not Found, Unsupported Directory Import; API methods include import.meta.resolve(specifier, parent) and internal ESM_RESOLVE(specifier, parentURL) with detailed error handling and file system traversal.</p>
<h2 class="md-github"><a class="md-github__anchor" name="escaped-extract" href="#escaped-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Escaped Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">Introduction
<ul class="md-github">
<li class="md-github">Definition of ECMAScript modules</li>
<li class="md-github">Code example: Exporting and importing functions</li>
</ul>
</li>
<li class="md-github">Enabling
<ul class="md-github">
<li class="md-github">Flags and file extensions to enable ES modules and CommonJS</li>
<li class="md-github">Example configuration in package.json and CLI arguments</li>
</ul>
</li>
<li class="md-github">Packages
<ul class="md-github">
<li class="md-github">Explanation of bare, relative, and absolute specifiers</li>
<li class="md-github">Package resolution via package.json exports</li>
</ul>
</li>
<li class="md-github">Import Specifiers and Attributes
<ul class="md-github">
<li class="md-github">Detailed types: relative, bare, absolute</li>
<li class="md-github">Syntax for import with attributes and required type for JSON</li>
</ul>
</li>
<li class="md-github">Built-in Modules and Dynamic Imports
<ul class="md-github">
<li class="md-github">Built-in module usage with default and named exports</li>
<li class="md-github">Dynamic import() and its support in both module systems</li>
</ul>
</li>
<li class="md-github">import.meta and its Properties
<ul class="md-github">
<li class="md-github">import.meta.dirname, filename, url, and resolve(specifier) method with version notes and behavior</li>
</ul>
</li>
<li class="md-github">Interoperability with CommonJS
<ul class="md-github">
<li class="md-github">Mechanism for wrapping CommonJS modules as ES modules</li>
<li class="md-github">Details on lack of __filename and __dirname, and use of module.createRequire</li>
</ul>
</li>
<li class="md-github">JSON and Wasm Modules
<ul class="md-github">
<li class="md-github">Mandatory syntax for JSON import</li>
<li class="md-github">Experimental status and flag requirements for Wasm modules</li>
</ul>
</li>
<li class="md-github">Top-Level Await
<ul class="md-github">
<li class="md-github">Allowing await at module top-level with failure behavior</li>
</ul>
</li>
<li class="md-github">Loaders and Customization Hooks
<ul class="md-github">
<li class="md-github">Customizing resolution with module hooks</li>
</ul>
</li>
<li class="md-github">Resolution and Loading Algorithm
<ul class="md-github">
<li class="md-github">ESM_RESOLVE: Step-by-step algorithm for resolving module specifiers including error conditions</li>
<li class="md-github">ESM_FILE_FORMAT: Determining module format based on file extension and package type
Detailed Details:</li>
</ul>
</li>
</ol>
<ul class="md-github">
<li class="md-github">Use .mjs extension or package.json 'type': 'module' to trigger ESM.</li>
<li class="md-github">When resolving, if specifier is URL, use directly; if relative, use parent's URL; if bare, use PACKAGE_RESOLVE.</li>
<li class="md-github">JSON modules require with { type: 'json' }.</li>
<li class="md-github">import.meta.resolve returns a string URL synchronously and accepts an optional parent URL parameter when experimental flag is set.</li>
<li class="md-github">ESM_RESOLVE algorithm checks for valid URL, relative specifiers, bare specifiers; computes format via ESM_FILE_FORMAT which checks extensions (.mjs -&gt; module, .cjs -&gt; commonjs, .json -&gt; json, etc.)</li>
<li class="md-github">Error handling includes Invalid Module Specifier, Module Not Found, and Unsupported Directory Import.</li>
<li class="md-github">Customization hooks override resolution; ensure synchronous operation to avoid deadlock.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Node.js ECMAScript Modules (ESM) Documentation
https://nodejs.org/api/esm.html</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-node_esm" href="#digest-of-node_esm"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of NODE_ESM</h2>
<h1 class="md-github"><a class="md-github__anchor" name="introduction" href="#introduction"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h1>
<p class="md-github">ECMAScript modules (ESM) are the official standard for packaging JavaScript code for reuse. Node.js fully supports ESM as specified, including interoperability with CommonJS.</p>
<h1 class="md-github"><a class="md-github__anchor" name="enabling" href="#enabling"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enabling</h1>
<p class="md-github">To enable an ES module in Node.js, use one of the following:</p>
<ul class="md-github">
<li class="md-github">File extension .mjs</li>
<li class="md-github">package.json field &quot;type&quot;: &quot;module&quot;</li>
<li class="md-github">--input-type flag set to &quot;module&quot;</li>
</ul>
<p class="md-github">For CommonJS, use:</p>
<ul class="md-github">
<li class="md-github">File extension .cjs</li>
<li class="md-github">package.json field &quot;type&quot;: &quot;commonjs&quot;</li>
<li class="md-github">--input-type flag set to &quot;commonjs&quot;</li>
</ul>
<p class="md-github">If no explicit marker is provided, Node.js inspects the source for ES module syntax and selects accordingly.</p>
<h1 class="md-github"><a class="md-github__anchor" name="packages" href="#packages"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Packages</h1>
<p class="md-github">Modules can be structured as packages. Bare specifiers (e.g., &quot;some-package&quot;) are resolved using Node.js module resolution. If a package.json has an &quot;exports&quot; field, only the defined paths are accessible.</p>
<h1 class="md-github"><a class="md-github__anchor" name="import-specifiers" href="#import-specifiers"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Import Specifiers</h1>
<p class="md-github">There are three types of specifiers:</p>
<ol class="md-github">
<li class="md-github">Relative specifiers (e.g. './startup.js' or '../config.mjs') which require file extensions.</li>
<li class="md-github">Bare specifiers (e.g. 'some-package' or 'some-package/shuffle') which may or may not require extensions depending on the package's exports configuration.</li>
<li class="md-github">Absolute specifiers (e.g. 'file:///opt/nodejs/config.js').</li>
</ol>
<h1 class="md-github"><a class="md-github__anchor" name="mandatory-file-extensions" href="#mandatory-file-extensions"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mandatory File Extensions</h1>
<p class="md-github">When using the import keyword, file extensions must be provided, including in directory indexes (e.g. './startup/index.js').</p>
<h1 class="md-github"><a class="md-github__anchor" name="urls-and-url-schemes" href="#urls-and-url-schemes"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URLs and URL Schemes</h1>
<p class="md-github">Module resolution transforms specifiers to URLs. Supported schemes include:</p>
<ul class="md-github">
<li class="md-github">file:</li>
<li class="md-github">node:</li>
<li class="md-github">data:</li>
</ul>
<p class="md-github">For file URLs, special characters (e.g. '#' and '?') must be percent-encoded. The use of url.pathToFileURL is recommended for conversion.</p>
<h1 class="md-github"><a class="md-github__anchor" name="file-urls" href="#file-urls"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>file: URLs</h1>
<p class="md-github">Modules loaded with file: URLs are sensitive to query strings and fragments, which cause multiple loads if changed. The root can be referenced through '/', '//' or 'file:///' examples.</p>
<h1 class="md-github"><a class="md-github__anchor" name="data-imports" href="#data-imports"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>data: Imports</h1>
<p class="md-github">Introduced in v12.10.0. Supports:</p>
<ul class="md-github">
<li class="md-github">text/javascript for ES modules</li>
<li class="md-github">application/json for JSON modules (requires with { type: 'json' })</li>
<li class="md-github">application/wasm for WebAssembly</li>
</ul>
<p class="md-github">Data URLs do not support relative resolution.</p>
<h1 class="md-github"><a class="md-github__anchor" name="node-imports" href="#node-imports"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>node: Imports</h1>
<p class="md-github">Supported since v14.13.1. Use node: URLs to load Node.js builtin modules (e.g. &quot;node:fs/promises&quot;).</p>
<h1 class="md-github"><a class="md-github__anchor" name="import-attributes" href="#import-attributes"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Import Attributes</h1>
<p class="md-github">Inline syntax for passing extra information with module specifiers. Syntax examples include:</p>
<p class="md-github">import fooData from './foo.json' with { type: 'json' };</p>
<p class="md-github">Only the &quot;type&quot; attribute is supported. In JSON modules, the type attribute (value 'json') is mandatory.</p>
<h1 class="md-github"><a class="md-github__anchor" name="built-in-modules" href="#built-in-modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Built-in Modules</h1>
<p class="md-github">Built-in modules (e.g., fs, events, buffer) export named API features. They are accessible via the default export representing module.exports alongside named exports. Example usage:</p>
<p class="md-github">import EventEmitter from 'node:events';
const e = new EventEmitter();</p>
<p class="md-github">import fs, { readFileSync } from 'node:fs';</p>
<p class="md-github">Sync builtin exports can be updated via module.syncBuiltinESMExports().</p>
<h1 class="md-github"><a class="md-github__anchor" name="import-expressions" href="#import-expressions"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>import() Expressions</h1>
<p class="md-github">Dynamic import() is supported in both CommonJS and ES modules, allowing asynchronous loading of modules.</p>
<h1 class="md-github"><a class="md-github__anchor" name="importmeta" href="#importmeta"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>import.meta</h1>
<p class="md-github">A meta property available only in ES modules. Key sub-properties include:</p>
<ul class="md-github">
<li class="md-github">import.meta.dirname: Directory name of the current module (v21.2.0)</li>
<li class="md-github">import.meta.filename: Absolute path with symlinks resolved (v21.2.0)</li>
<li class="md-github">import.meta.url: Absolute file URL of the current module</li>
<li class="md-github">import.meta.resolve(specifier): Synchronously resolves a module specifier to an absolute URL using Node.js resolution algorithm (v20.6.0)</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="interoperability-with-commonjs" href="#interoperability-with-commonjs"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interoperability with CommonJS</h1>
<p class="md-github">ES modules can import CommonJS modules. When imported, the default export represents module.exports and a namespace wrapper may be constructed to expose named exports discovered by static analysis.</p>
<p class="md-github">Key points:</p>
<ul class="md-github">
<li class="md-github">No require, exports, or module.exports in ES modules</li>
<li class="md-github">__filename and __dirname are unavailable; use import.meta instead</li>
<li class="md-github">Addon Loading and require.resolve are not available in ES modules</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="json-modules" href="#json-modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON Modules</h1>
<p class="md-github">JSON files can be imported using:</p>
<p class="md-github">import packageConfig from './package.json' with { type: 'json' };</p>
<p class="md-github">Only a default export is provided; cache entries are shared with CommonJS.</p>
<h1 class="md-github"><a class="md-github__anchor" name="wasm-modules" href="#wasm-modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wasm Modules</h1>
<p class="md-github">WebAssembly modules (.wasm) can be imported when the --experimental-wasm-modules flag is enabled. The module exports an instantiation interface.</p>
<h1 class="md-github"><a class="md-github__anchor" name="top-level-await" href="#top-level-await"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Top-level await</h1>
<p class="md-github">Supported since v14.8.0. Allows the use of await at the top-level. Failure to resolve leads to an exit code 13. Example:</p>
<p class="md-github">export const five = await Promise.resolve(5);</p>
<h1 class="md-github"><a class="md-github__anchor" name="loaders" href="#loaders"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loaders</h1>
<p class="md-github">Loaders allow customization of module loading via hooks. Older documentation refers to custom loader hooks for tasks such as source transformation and format determination.</p>
<h1 class="md-github"><a class="md-github__anchor" name="resolution-and-loading-algorithm" href="#resolution-and-loading-algorithm"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolution and Loading Algorithm</h1>
<p class="md-github">The algorithm (ESM_RESOLVE) returns a resolved URL and suggested module format based on the specifier type. It works as follows:</p>
<ol class="md-github">
<li class="md-github">If the specifier is a valid URL, use it directly.</li>
<li class="md-github">For relative (starts with '/', './', '../') or hash specifiers, resolve against parentURL.</li>
<li class="md-github">For bare specifiers, use PACKAGE_RESOLVE to resolve via node_modules and package.json &quot;exports&quot;.</li>
</ol>
<p class="md-github">Sub-algorithms include:</p>
<ul class="md-github">
<li class="md-github">
<p class="md-github">ESM_FILE_FORMAT: Determines module format based on file extension or package type. Returns</p>
<ul class="md-github">
<li class="md-github">&quot;module&quot; for '.mjs'</li>
<li class="md-github">&quot;commonjs&quot; for '.cjs'</li>
<li class="md-github">&quot;json&quot; for '.json'</li>
<li class="md-github">&quot;wasm&quot; for '.wasm' if experimental flag enabled</li>
<li class="md-github">&quot;addon&quot; for '.node' if addon modules enabled</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">PACKAGE_RESOLVE: Resolves bare specifiers by traversing parent directories, checking package.json and &quot;exports&quot; field.</p>
</li>
<li class="md-github">
<p class="md-github">PACKAGE_EXPORTS_RESOLVE and PACKAGE_IMPORTS_RESOLVE: Process exports and imports fields in package.json to determine correct file mapping.</p>
</li>
<li class="md-github">
<p class="md-github">LOOKUP_PACKAGE_SCOPE and READ_PACKAGE_JSON: Helpers to locate package.json and determine package scope.</p>
</li>
</ul>
<p class="md-github">Errors thrown include:</p>
<ul class="md-github">
<li class="md-github">Invalid Module Specifier</li>
<li class="md-github">Invalid Package Configuration</li>
<li class="md-github">Module Not Found</li>
<li class="md-github">Unsupported Directory Import</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="customizing-esm-resolution" href="#customizing-esm-resolution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing ESM Resolution</h1>
<p class="md-github">Module customization hooks allow modification of the default resolution algorithm. Example projects exist to simulate CommonJS resolution behavior in ESM contexts.</p>
<p class="md-github">Retrieved: 2023-10-05
Attribution: Data Size: 4312169 bytes, 5283 Links Found, No Errors</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Node.js ECMAScript Modules (ESM) Documentation</li>
<li class="md-github">URL: https://nodejs.org/api/esm.html</li>
<li class="md-github">License: License: MIT</li>
<li class="md-github">Crawl Date: 2025-04-22T02:30:18.248Z</li>
<li class="md-github">Data Size: 4312169 bytes</li>
<li class="md-github">Links Found: 5283</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-04-22</p>

  </section>
  <footer>
    <p>Generated on 2025-04-23T22:24:59.175Z</p>
  </footer>
</body>
</html>